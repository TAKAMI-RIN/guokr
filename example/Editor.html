<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>编辑器</title>
    <link rel="stylesheet" href="../skin/h.css" />
    <link rel="stylesheet" href="all.css" />
    <link rel="stylesheet" href="../skin/lib/Editor.css" />
</head>
<body>
    <div class="container">
        <div class="guokr" id="guokr"></div>
        <div class="gheader-wp">
        <div class="gheader-wp-b">
        <div class="gheader">
            <a id="guokrLogo" class="gheader-logo" title="果壳 科技有意思">果壳网</a>
            <ul class="gheader-nav">
                <li><a href="/ui.html">CSS UI</a></li>
                <li><a href="/example/" class="current">JS组件</a></li>
            </ul>
        </div>
        </div>
        </div>
        <div class="top-wp">
            <div class="top fix">
                <div class="top-main">
                    <h1 class="top-main-n2">编辑器</h1>
                </div>
            </div>
        </div>
        <div class="wrap">
            <dl class="main-example">
                <dt>描述：</dt>
                <dd>
* 编辑器模块<br/>
* @author mzhou<br/>
* @desc 用于所见即所得的UBB编辑器，而且有弹出框、文件上传等功能，可以配合block模块实现。<br/>
* @version 1.1<br/>
* @log 1.1 修改添加了配置文件中的contentHtml参数，当有此参数时content的子元素会被contentHtml替换，并选取其子元素中的textarea作为编辑器的包装对象<br/>
*      1.2 使用block2替代block<br/>
*      1.3 重构了编辑器，添加了很多特性，支持了多实例，添加了@功能<br/>
*      1.4 支持了设置div为输入框的功能<br/>
*      1.4 使用Overlay替代block2</dd>
                <dt>引用js和css：</dt>
                <dd>
                    JS:<br/>
                    //@import "lib/Editor.js";<br/>
                    CSS:<br/>
                    @import "lib/Editor.css";
                </dd>
                <dt>基于textarea的编辑器：</dt>
                <dd>
<pre>var editor1 = new Editor({
    // textarea的selector
    content: '#editorContent',
    // 默认高度
    height: 200,
    // 上传图片的设置
    uploaderOption: {
        ukey: 'weukjk',
        upType: 'post',
        dataType: 'json',
        url: '/uploadfile/user_upload'
    }
});</pre>
                <button class="demo sg_btn mt20">运行</button>
                </dd>
                <dt>demo:</dt>
                <dd><textarea id="editorContent" name="" rows="10" class="editor-content" cols="30">各位在本小组找到对象的同学，或者想来果壳找对象的。快在本贴自曝吧！亮出你们的照片。
 [bold]发现已自曝的同学：[/bold] 
1. [url href=http://www.guokr.com/i/0927807376/]nasdaq[/url]君及其夫人
[image]http://ouchxp.sitemix.jp/z1.PNG[/image]    

2. [url href=http://www.guokr.com/blog/51386/?page=1#comment]小园听风[/url]
[image]http://img1.guokr.com/gkimage/d8/kn/9l/d8kn9l.png[/image]       
其夫人：
[image]http://img1.guokr.com/gkimage/nt/3m/7u/nt3m7u.png[/image]

如果我的发帖侵犯了如上几位的肖像权，切勿怪我。我的眼珠子已经掉下来了！

3. [bold]果壳网视频曝光：[/bold]
各种你见过的、没见过的果壳员工。
[flash]http://www.tudou.com/v/rBE4JTbbZSE/v.swf[/flash]
</textarea></dd>

                <dt>基于任意节点的编辑器：</dt>
                <dd>
<pre>var editor2 = new Editor({
    // 任意节点选择符
    content: '#editor2',
    // 替换指定任意节点的html，必须有textarea在内
    contentHtml: '&lt;h1&gt;第二种方法&lt;/h1&gt;&lt;textarea&gt;&lt;/textarea&gt;',
    // 默认填充在编辑器中的文字
    defaultValue: '这是默认js中设置的文字',
    height: 100,
    uploaderOption: {
        ukey: 'weukjk',
        upType: 'post',
        dataType: 'json',
        url: '/uploadfile/user_upload'
    }
});</pre>
                <button class="demo sg_btn mt20">运行</button>
                </dd>
                <dt>demo:</dt>
                <dd><div id="editor2">
                    没有意义的文字
                </div></dd>

                <dt>基于任意有文本的节点的编辑器：</dt>
                <dd>
<pre>var editor3 = new Editor({
    // 任意有文本的节点的选择符
    content: '#editor3',
    // 替换指定任意节点的html，必须有textarea在内。默认使用指定节点的文本作为编辑器中的文字
    contentHtml: '&lt;h1&gt;第三种方法&lt;/h1&gt;&lt;textarea&gt;&lt;/textarea&gt;',
    height: 100,
    uploaderOption: {
        ukey: 'weukjk',
        upType: 'post',
        dataType: 'json',
        url: '/uploadfile/user_upload'
    }
});</pre>
                <button class="demo sg_btn mt20">运行</button>
                </dd>
                <dt>demo:</dt>
                <dd><div id="editor3">
                    没有意义的文字
                    没有意义的文字
                </div></dd>

                <dt>对外接口：</dt>
                <dd>
<pre>var editor = new Editor({
    // 任意有文本的节点的选择符
    content: '#editor3',
    // 替换指定任意节点的html，必须有textarea在内。默认使用指定节点的文本作为编辑器中的文字
    contentHtml: '&lt;h1&gt;第三种方法&lt;/h1&gt;&lt;textarea&gt;&lt;/textarea&gt;',
    height: 100,
    uploaderOption: {
        ukey: 'weukjk',
        upType: 'post',
        dataType: 'json',
        url: '/uploadfile/user_upload'
    }
});
editor.update()         // 更新值
      .showEditor()     // 显示为可视化模式
      .showSource()     // 显示为代码模式
      .clear()          // 清除编辑器里面的内容
editor.val('value')     // 设置编辑器内容
editor.val()            // 返回编辑器内容
editor.focus()          // focus光标到编辑器
editor.remove()         // 移除编辑器
</pre>
                </dd>
            </dl>
        </div>
    </div>
    <script>
    var GJS_URL = '/js/',
        GJS_PRELOAD = ['GUtils'];
    </script>
    <script src="../G/G.js"></script>
    <script>
        G.req( 'Editor', function( Editor ) {
            window.Editor = Editor;
            $('.demo').each(function( i ) {
                var $this = $(this);
                $this.toggle(function() {
                    $.globalEval( $this.prev().text() );
                }, function() {
                    var key = 'editor'+(i+1);
                    if ( window[key] ) {
                        window[key].remove();
                        window[key] = null;
                    }
                });
            });
        });
    </script>

</body>
</html>
